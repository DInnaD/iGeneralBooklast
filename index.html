<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta content="IE=edge" http-equiv="X-UA-Compatible">
	<meta content="width=device-width, initial-scale=1" name="viewport">
	<meta content="" name="description">
	<meta content="" name="author">
	<title>iGeneralBook</title><!-- Bootstrap Core CSS -->
	<link href="css/bootstrap.min.css" rel="stylesheet"><!-- Custom CSS -->
	<link href="css/business-casual.css" rel="stylesheet"><!-- Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
	<link href="https://fonts.googleapis.com/css?family=Josefin+Slab:100,300,400,600,700,100italic,300italic,400italic,600italic,700italic" rel="stylesheet" type="text/css"><!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
	<link href="libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet"><!-- Bootstrap core CSS -->	
	<link href="css/style.css" rel="stylesheet">
</head>
<body>
	<div id="mymap"></div>
	<div id="contactform">aaaaaaaaaa
		<div class="container" style="position: relative;">
			<input id="search" name="search" onkeyup="search()" placeholder="Search.." type="text"> <button onclick="talk()" style="background: none; border:none; padding-top: 3px;"><i aria-hidden="true" class="fa fa-microphone"></i></button> <button onclick="stop()" style="background: none; border:none; padding-top: 3px;"><i aria-hidden="true" class="fa fa-microphone-slash"></i></button>
			<hr>
			<div class="brand">
				<a class="btn btn-circle" href="#" style="color: #42DCA3; !important; border: none ! important;"><i aria-hidden="true" class="fa fa-info-circle" style="color: #42DCA3; !important;"></i></a>General Book
			</div>
			<div id="navigation">
				<ul class="nav-list">
					<li class="btn btn-circle" id="js-show-all" onclick="document.getElementById('bookmarksResults').style.display='block'"><a href="#" id="toggler" style="padding: 0px; font-size: 45px; color: #42DCA3; text-decoration: underline;"><i aria-hidden="true" class="fa fa-users"></i></a></li>
					<li class="btn btn-circle" id="js-search" onclick="document.getElementById('demo').style.display='block'"><a href="#" id="toggler" style="padding: 0px; font-size: 45px; color: #42DCA3; text-decoration: underline;"><i aria-hidden="true" class="fa fa-search"></i></a></li>
					<li class="btn btn-circle" id="js-add-new" onclick="document.getElementById('form').style.display='block'">
						<a href="#" id="toggler" style="padding: 0px; font-size: 45px; color: #42DCA3; text-decoration: underline;"><i aria-hidden="true" class="fa fa-plus"></i></a> <!--i class="fa fa-plus" aria-hidden="true"></i-->
					</li>
				</ul>
			</div>
		</div><!-- /container -->
	</div><!--"black"-->
	<div class="con" style=" background: #000; position: relative; text-align: center; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); font-family: ; max-width: 100%;">
	<div class="container">
	<div class="jumbotron"></div>
	<div class="container">
		<div class="col-md-offset-2 col-md-8 col-xs-12">
			<form id="storageForm" name="storageForm" role="form">
				<div class="form-group">
					<label for="keyName"></label><input class="form-control" name="keyName" id="keyName" class="keyName" placeholder="Name" type="text">
				</div>
				<div class="form-group">
					<label for="keyValue"></label><input class="form-control" name="keyValue" id="keyValue" class="keyValue" placeholder="Phone" type="text">
				</div>
				<div class="form-group">
					<label class="sr-only" for="submit"></label><input class="btn btn-circle" id="submit_button" type="submit" value="!Go" style="font-size: 25px; text-transform: none;">
				</div>
				<div class="form-group">
					<label class="sr-only" for="submit"></label><button class="btn btn-danger" id="clear_button" value="Clear">Clear All</button>
				</div>
			</form>
		</div>
	</div><br>
	<br>
	<hr>
	<div class="container">
		<div class="col-md-12">
			<div class="well bg-danger" id="storageWell" style="padding: 19px 300px; !important">
				<p class="missing" id="nodata">Add your data here!</p>
				<ul id="storageList"></ul>
			</div>
		</div>
	</div>


<script>
(function() {
 document.getElementById('submit_button').addEventListener('click', function(e) {
	
    var key = {};
    var key_int = localStorage.length + 1;
    key.id = "item" + key_int;
    //console.log(key.id);
    var itemExists = document.getElementById(key.id);
    if(itemExists !== null) {
      itemExists.remove();
    }
    key.name = document.getElementById("keyName").value;
    //console.log(key.name);
    key.value = document.getElementById("keyValue").value;
    //console.log(key.value);
	 console.log(key);
 	 
if(!validateForm(keyName, keyValue)){//with getElementById
    return false;
  }	 
var jsonkey = key.value;
     
	    
    console.log(jsonkey);
	 
	
    // Local Storage Test
    //localStorage.setItem('test', 'Hello World');
    //console.log(localStorage.getItem('test'));
   // localStorage.removeItem('test');
   // console.log(localStorage.getItem('test'));
 
// Set to localStorage until 5MB
   try {	
      // Test if bookmarks is null
//  if(localStorage.getItem('bookmarks') === null){
    // Init array
  //  var bookmarks = [];
    // Add to array
  //  bookmarks.push(key);
    // Set to localStorage
   // localStorage.setItem('key', JSON.stringify(bookmarks));
  
	    localStorage[key.name] = JSON.stringify(key);//jsonkey
	  
	  }
	} catch (e) {
  if (e == QUOTA_EXCEEDED_ERR) {
   alert('Превышен лимит');
  }
}	  
    var nodata = document.getElementById("nodata");
    console.log(nodata);
    var nodataHidden = hasClass(nodata, 'hidden');
    if(nodataHidden == false) {
      nodata.classList.add("hidden");
    }
    
    var storageList = document.getElementById("storageList");
    var listItem = document.createElement("li");
    listItem.setAttribute("id", key.name);
    var item = JSON.parse(localStorage[key.name]);
    console.log(item.Id);
    console.log(item.Name);
    console.log(item.Value);
    var pieces = "Key: " + key.name + ", Value: " + key.value +
    ' <a class="toggler" class="btn btn-danger" href="#">More</a> ' +
    ' <a class="btn btn-default" target="_blank" href="' + url + '">Visit</a> ' +
    ' <a storageWell.addEventListener("click", editBookmark(key.id)) class="btn btn-danger" href="#">Edite</a> ' +
    ' <a storageWell.addEventListener("click", deleteBookmark(key.id)) class="btn btn-danger">Delete</a> ';
    var itemNode = document.createTextNode(pieces);
    listItem.appendChild(itemNode);
    storageList.appendChild(listItem);
    
    /**
     * @name hasClass
     * @desc Function to test for class on an element without jquery
     */
    function hasClass(el, selector) {
      var className = " " + selector + " ";
      if ((" " + el.className + " ").replace(/[\n\t]/g, " ").indexOf(className) > -1) {
        return true;
      }      
      return false;
    };
	// Clear form
    //document.getElementById('submit_button').reset();	 
    e.preventDefault(); 
  });
  document.getElementById('clear_button').addEventListener('click', function(e) {
    e.preventDefault();
    localStorage.clear();
    var storageList = document.getElementById("storageList");
    while (storageList.firstChild) {
    storageList.removeChild(storageList.firstChild);
    }
    var nodata = document.getElementById("nodata");
    nodata.classList.remove("hidden");
  });
	  
})();
</script>
			<!--div class="jumbotron">	
				<form id="form" name="form">
					<div class="container" style="color: black; padding: 0px 465px;">
						<div class="form-group">
							<label></label> <input class="form-control name" id="siteName" name="name" placeholder="Name" type="text">
						</div>
						<div class="form-group">
							<label></label> <input class="form-control url" id="siteUrl" name="url" placeholder="URL" type="text">
						</div><button class="btn btn-circle brand" style="float: left; padding-right: 0px;" type="submit">Submit</button>
					</div>
				</form>
				

	
				<form id="formEdit" name="formEdit" style="display:none">
					<div class="container" style="color: black; padding: 0px 400px;">
						<div class="form-group">
							<label></label> <input class="form-control name" id="siteName" name="name" placeholder="Name" type="text">
						</div>
						<div class="form-group">
							<label></label> <input class="form-control url" id="siteUrl" name="url" placeholder="URL" type="text">
						</div><button class="btn btn-circle brand" style="float: left; padding-right: 0px;" type="submit">Submit</button>
					</div>
				</form>
				<div class="row marketing">
					<div class="col-lg-12">
						<div id="bookmarksResults"></div>
					</div>
				</div-->
       
			</div><!-- /container -->
		</div>
	</div>
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA3AhxWKKpXIAi9-zWrP61IN-5viMwakzQ&callback=initMap">
</script>	
<script src="https://use.fontawesome.com/053cca04b2.js"></script>
<script src="https://code.jquery.com/jquery-3.1.1.js"
    integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
    crossorigin="anonymous"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/index.js"></script>	    
<script src="js/jquery.js"></script>
<script src="js/main.js"></script>
<script src="js/my.js"></script>	
</body>
</html>
